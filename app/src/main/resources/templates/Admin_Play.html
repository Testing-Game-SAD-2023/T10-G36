<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="../css/ViewClasses.css">
    <link rel="stylesheet" href="../css/searchForm.css">
</head>
<body onload="populateUnitList()">
  <!--  NAVBAR    -->
  <nav>
    <div class="wrapper">
      <!-- LOGO ADMIN -->
      <div class="logo"><a href="/Admin_Menu">Admin Menu</a></div>

      <input type="radio" name="slider" id="menu-btn">
      <input type="radio" name="slider" id="close-btn">
      <ul class="nav-links">
        <label for="close-btn" class="btn close-btn"><i class="fas fa-times"></i></label>
        <!-- NAVBAR - HOME -->
        <li><a href="/Admin_Menu">Home</a></li>

        <!-- NAVBAR - PLAY -->
        <li><a href="/Admin_Play">Gioca</a></li>

        <!-- NAVBAR - GAME MENU -->
        <li><a href="#" class="desktop-item">Game Menu</a>
          <input type="checkbox" id="showDrop">
          <label for="showDrop" class="mobile-item">Game Menu</label>
          <ul class="drop-menu">
            <li><a href="/Admin_ViewClasses">View Classes</a></li>
            <li><a href="/Admin_SearchClasses">Search Classes</a></li>
          </ul>
        </li>

        <!-- NAVBAR - GAME MANAGEMENT -->
        <li><a href="#" class="desktop-item">Game Management</a>
          <input type="checkbox" id="showMega">
          <label for="showMega" class="mobile-item">Game Management</label>
          <div class="mega-box">
            <div class="content">
              <div class="row">
                <img src="https://www.gameindustrycareerguide.com/wp-content/uploads/2021/05/best-programming-languages-for-games.jpg" alt="">
              </div>
              <div class="row">
                <header>Class Management</header>
                <ul class="mega-links">
                  <li><a href="/Admin_UploadClass">Upload Class</a></li>
                  <li><a href="/Admin_ManageClass">Manage Classes</a></li>
                  <li><a href="/Admin_AdvancedSearchClasses">Search Classes</a></li>
                </ul>
              </div>
              <div class="row">
                <header>User Management</header>
                <ul class="mega-links">
                  <li><a href="#">Register an User</a></li>
                  <li><a href="#">Delete an User</a></li>
                  <li><a href="#">Search an User</a></li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li><a href="/">Esci</a></li>
      </ul>
      <label for="menu-btn" class="btn menu-btn"><i class="fas fa-bars"></i></label>
    </div>
  </nav>

  <!--    CONTENUTO DELLA PAGINA  -->
  
  <div class="container">
    <div class="text">PLAY</div>
    <form action="Admin_PlayGame" method="GET">
      <div class="form-row" >
        <div class="subText" style="width:800px; margin:0 auto;">Choose a Class to Test:</div>
        <div class="input-data">
          <select id="uc_selector" name="uc_selector" onfocus="unitMenuChange(this)" required>
            <option value="0">Select Classes</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="subText" style="width:800px; margin:0 auto;">Choose a Robot to Fight:</div>
        <div class="input-data">
          <select id="robotsMenu" name="robotsMenu">
            <option value="">Select a Robot</option>
            <option value="RANDOOP">Randoop</option>
            <option value="EVOSUITE">EvoSuite</option>
          </select>
        </div>
      </div>
      <div class="form-row submit-btn">
        <div class="input-data" style="width:800px; margin:0 auto;">
          <div class="inner"></div>
          <input type="submit" value="         play" class="form-submit-button" id="play" href="#">
        </div>
      </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    var unitLists = new Array(2) 
    unitLists["0"] = ["Select"]; 
    unitLists["List"] = [""];
    

    function populateUnitList() {
        
          const params = new URLSearchParams();
          params.append('loc', '1');
          axios.get('/user/api/RicercaAvanzata?')
            .then(function(response) {
              const classes = response.data;
              var arr = [];
              
              for (const classObj of classes) {
                
                arr.push(classObj.url);
                
              }
              unitLists["List"] = arr;
          });
    }

    function unitMenuChange(selectObj) { 
    var idx = selectObj.selectedIndex;
    var which = "List";
    uList = unitLists[which];
    var uc_selector = document.getElementById("uc_selector");
 
    while (uc_selector.options.length > 0) { 
        uc_selector.remove(0); 
    }
    var newOption;
    // create and add new options 
    for (var i=0; i<uList.length; i++) {
        newOption = document.createElement("option"); 
        newOption.value = uList[i];  
        newOption.text=uList[i];
        try { 
            uc_selector.add(newOption); 
            } 
        catch (e) { 
            uc_selector.appendChild(newOption);
            } 
    }
 }
</script>


</body>
</html>
